import{c as j,b as y,r as w,j as e,ar as b,av as L}from"./index-Bt5p3x_A.js";import{u as N,L as h,F as a,s as m}from"./useMutation-8FZ-g2NU.js";import{I as d,B as x,x as E,U as I}from"./apiConstant-B8wiNf3q.js";import"./index-DYhvgXnn.js";import"./row-Dg9EiMXg.js";const{Header:v,Content:P}=h,q=()=>{const n=j(),g=y(),[o,l]=w.useState(!1),p=N({mutationFn:s=>E(I,s),onSuccess:s=>{var t,i,c,u;l(!1),m.success("Login successful!");const r=(i=(t=s==null?void 0:s.data)==null?void 0:t.data)==null?void 0:i.user;g(L({user:r.username,role:r.role,token:(u=(c=s==null?void 0:s.data)==null?void 0:c.data)==null?void 0:u.accessToken})),n("/")},onError:s=>{var r,t;m.error(((t=(r=s.response)==null?void 0:r.data)==null?void 0:t.message)||"Login failed."),console.error("Error in logged in:",s)}}),f=s=>{l(!0),p.mutate(s)};return o?e.jsx(b,{}):e.jsxs(h,{className:"min-h-screen",children:[e.jsx(v,{className:"bg-custom-blue text-custom-white flex items-center",children:e.jsx("div",{className:"text-3xl font-sans font-bold",children:"Rahul Kumar"})}),e.jsx(P,{className:"flex flex-col justify-center items-center bg-gray-100 py-16",children:e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg max-w-sm w-full",children:[e.jsx("h2",{className:"text-3xl text-center text-blue-600 mb-8",children:"Login"}),e.jsxs(a,{layout:"vertical",onFinish:f,children:[e.jsx(a.Item,{label:"Username",name:"username",rules:[{required:!0,message:"Please enter your username"}],children:e.jsx(d,{placeholder:"Enter your username"})}),e.jsx(a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please enter your password"}],children:e.jsx(d.Password,{placeholder:"Enter your password"})}),e.jsx(a.Item,{children:e.jsx(x,{type:"primary",htmlType:"submit",className:"w-full",loading:o,children:"Login"})})]}),e.jsx(a.Item,{children:e.jsx(x,{type:"default",className:"w-full mt-4",onClick:()=>n("/register"),children:"Register"})})]})})]})};export{q as default};
